<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <link rel="stylesheet" href="../styles/styles.css">
</head>
<body>
    <%- include("../components/navbar.ejs") %>
    <section>
        <div class="navbar-space"></div>
        <div class="container" style="margin-top: 1rem;">
            <h1>Your Cart</h1>
    
            <% if (cartGames.length === 0 && cartDLCs.length === 0 && cartGiftCards.length === 0) { %>
                <p>This is where your games will appear!</p>
            <% } else { %>
                <div class="horizontal-grid">
                    <div class="grid-object-l">
                        <% for(let i = 0; i < cartGames.length; i++) { %>
                            <% const game = cartGames[i]; %>
                            <% const path = gameimagesPath[i]; %>
                            <div class="container" style="margin-left: 0; margin-top: 1rem;">
                                <div class="horizontal-grid">
                                    <img class="game-image" style="height: 12rem;" src="<%= path %>" alt="God of war">
                                    <div class="vertical-grid">
                                        <div class="horizontal-grid" style="margin-left: 1rem;">
                                            <div class="grid-object-m left">
                                                <h1><%= game.GameName %></h1>
                                            </div>
                                            <div class="grid-object-m right" style="margin-right: 1rem;">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="delete">
                                                    <path d="M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"/>
                                                </svg>
                                            </div>
                                        </div>
                                        <div class="horizontal-grid pad-1-2">
                                            <div class="grid-object-m left" style="margin-right: 10rem;">
                                                <h4><%= game.GameDescription %></h4>
                                            </div>
                                            <div class="grid-object-m right" style="margin-right: 1rem;">
                                                <h2><%= (game.GamePrice * (1 - game.GameDiscount / 100)).toFixed(2)  %>€</h2>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <% } %>
    
                        <% for(let i = 0; i < cartDLCs.length; i++) { %>
                            <% const DLC = cartDLCs[i]; %>
                            <% const path = dlcimagesPath[i]; %>
                            <div class="container" style="margin-left: 0; margin-top: 1rem;">
                                <div class="horizontal-grid">
                                    <img class="game-image" style="height: 12rem;" src="<%= path %>" alt="God of war">
                                    <div class="vertical-grid">
                                        <div class="horizontal-grid" style="margin-left: 1rem;">
                                            <div class="grid-object-m left">
                                                <h1><%= DLC.DLCName %></h1>
                                            </div>
                                            <div class="grid-object-m right" style="margin-right: 1rem;">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="delete">
                                                    <path d="M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"/>
                                                </svg>
                                            </div>
                                        </div>
                                        <div class="horizontal-grid pad-1-2">
                                            <div class="grid-object-m left" style="margin-right: 10rem;">
                                                <h4><%= DLC.DLCDescription %></h4>
                                            </div>
                                            <div class="grid-object-m right" style="margin-right: 1rem;">
                                                <h2><%= (DLC.DLCPrice * (1 - DLC.DLCDiscount / 100)).toFixed(2)  %>€</h2>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <% } %>
    
                        <% for(let i = 0; i < cartGiftCards.length; i++) { %>
                            <% const card = cartGiftCards[i]; %>
                            <% const path = giftcardsPath[i]; %>
                            <div class="container" style="margin-left: 0; margin-top: 1rem;">
                                <div class="horizontal-grid">
                                    <img class="game-image" style="height: 12rem;" src="<%= path %>" alt="God of war">
                                    <div class="vertical-grid">
                                        <div class="horizontal-grid" style="margin-left: 1rem;">
                                            <div class="grid-object-m left">
                                                <h1>Gift Card <%= card.GFCValue %>€</h1>
                                            </div>
                                            <div class="grid-object-m right" style="margin-right: 1rem;">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="delete">
                                                    <path d="M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"/>
                                                </svg>
                                            </div>
                                        </div>
                                        <div class="horizontal-grid pad-1-2">
                                            <div class="grid-object-m left" style="margin-right: 10rem;">
                                                <h4></h4>
                                            </div>
                                            <div class="grid-object-m right" style="margin-right: 1rem;">
                                                <h2><%= card.GFCValue %>€</h2>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <% } %>
                    </div>
                    <div class="grid-object-s">
                        <div class="container vertical-grid" style="width: 80%;">
                            <div class="horizontal-grid">
                                <h2>Total:</h2>
                                <h2><%= totalprice.toFixed(2) %>€</h2>
                            </div>
                            <div class="vertical-grid center">
                                <form action="/profile" class="vertical-grid center" id="form-purchase">
                                    <input type="hidden" value="<%= JSON.stringify(cartGames) %>" id="cartGames">
                                    <input type="hidden" value="<%= JSON.stringify(cartDLCs) %>" id="cartDLCs">
                                    <input type="hidden" value="<%= JSON.stringify(cartGiftCards) %>" id="cartGiftCards">
                                    <input type="hidden" value="<%= userid %>" id="userID">
    
                                    <button type="submit" class="button button-l">Go to payment</button>
                                </form>
                                <form action="/store" method="" class="vertical-grid center">
                                    <button type="submit" class="button button-l">Continue Shopping </button>
                                </form>                                             
                            </div>
                        </div>
                    </div>
                </div>
            <% } %>
        </div>
    </section>
    <footer>
        <script src="../scripts/purchase.js"></script>
    </footer>
</body>
</html>